<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WellnessConnect Homepage</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>

    <div class="sidebar">
        <button class="toggle-btn">
            <img src="/static/icons/menu.png" alt="Menu">
        </button>
        
        <ul>
            <li><a href="/admin_homepage"><img src="/static/icons/home.png" class="icon"><span> Home</span></a></li>            
            <li><a href="/admin_account"><img src="/static/icons/account.png" class="icon"><span>Account Center</span></a></li>
        </ul>
    
        <button class="logout-btn" onclick="location.href='/logout'">
            <img src="/static/icons/logout.png" class="icon"><span>Logout</span>
        </button>
    </div>
    

    <div class="page-content">
        <h1>
            <img id="wellness_icon" src="/static/icons/logo.png" width="40px" alt="Icon">
            WellnessConnect
        </h1>

        <main class="admin-activity-content">
            <!-- PENDING LOGS -->
            <div class="activity-table">
                <h2>Pending Activity Logs</h2>
                <table>
                    <thead>
                        <tr>
                            <th>User ID</th>
                            <th>Logged At</th>
                            <th>Activity</th>
                            <th>Value</th>
                            <th>Unit</th>
                            <th>Exercise Type</th>
                            <th>Proof</th>
                            <th>Proof Valid</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for log in pending_logs %}
                        <tr class="pending-log-row {% if not loop.first %}hidden-row{% endif %}">
                            <td>{{ log.user_id }}</td>
                            <td>{{ log.logged_at.strftime('%Y-%m-%d %H:%M') }}</td>
                            <td>{{ log.activity_type }}</td>
                            <td>{{ log.value }}</td>
                            <td>{{ log.unit or '' }}</td>
                            <td>{{ log.exercise_type or '—' }}</td>
                            <td>
                                {% if log.proof_url %}
                                    <button type="button" onclick="openProofModal('{{ url_for('static', filename=log.proof_url) }}')">
                                        View
                                    </button>
                                {% else %}
                                    —
                                {% endif %}
                            </td>
                            <td>Pending</td>
                            <td>
                                <form method="post" action="{{ url_for('approve_proof', log_id=log.log_id) }}">
                                    <button type="submit">Approve</button>
                                </form>
                                <form method="post" action="{{ url_for('reject_proof', log_id=log.log_id) }}">
                                    <button type="submit">Reject</button>
                                </form>
                            </td>
                        </tr>
                        {% endfor %}

                    </tbody>
                </table>
                
                <button class="toggle-btn" onclick="toggleLogSection('pending-log-row', this)">Show All</button>
            </div>

            <!-- APPROVED LOGS -->
            <div class="activity-table">
                <h2>Approved Activity Logs</h2>
                <table>
                    <thead>
                        <tr>
                            <th>User ID</th>
                            <th>Logged At</th>
                            <th>Activity</th>
                            <th>Value</th>
                            <th>Unit</th>
                            <th>Exercise Type</th>
                            <th>Proof</th>
                            <th>Proof Valid</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for log in approved_logs %}
                        <tr class="approved-log-row {% if not loop.first %}hidden-row{% endif %}">
                            <td>{{ log.user_id }}</td>
                            <td>{{ log.logged_at.strftime('%Y-%m-%d %H:%M') }}</td>
                            <td>{{ log.activity_type }}</td>
                            <td>{{ log.value }}</td>
                            <td>{{ log.unit or '' }}</td>
                            <td>{{ log.exercise_type or '—' }}</td>
                            <td>Yes</td>
                            <td>Valid</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <button class="toggle-btn" onclick="toggleLogSection('approved-log-row', this)">Show All</button>
            </div>

            <!-- REJECTED / NO PROOF -->
            <div class="activity-table">
                <h2>Rejected/No-Proof Activity Logs</h2>
                <table>
                    <thead>
                        <tr>
                            <th>User ID</th>
                            <th>Logged At</th>
                            <th>Activity</th>
                            <th>Value</th>
                            <th>Unit</th>
                            <th>Exercise Type</th>
                            <th>Proof</th>
                            <th>Proof Valid</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for log in rejected_logs %}
                        <tr class="rejected-log-row {% if not loop.first %}hidden-row{% endif %}">
                            <td>{{ log.user_id }}</td>
                            <td>{{ log.logged_at.strftime('%Y-%m-%d %H:%M') }}</td>
                            <td>{{ log.activity_type }}</td>
                            <td>{{ log.value }}</td>
                            <td>{{ log.unit or '' }}</td>
                            <td>{{ log.exercise_type or '—' }}</td>
                            <td>{{ 'Yes' if log.proof else 'No' }}</td>
                            <td>Rejected</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <button class="toggle-btn" onclick="toggleLogSection('rejected-log-row', this)">Show All</button>
            </div>

            <!-- Admin Proof Modal -->
            <div id="proofModal" class="modal">
                <div class="modal-content">
                <span class="close" onclick="closeProofModal()">&times;</span>
                <img id="proofImagePreview" src="#" alt="Proof Image" style="max-width: 100%; border-radius: 10px;">
                </div>
            </div>

        </main>
    </div>

    <script src="/static/script.js"></script>

</body>
</html>
